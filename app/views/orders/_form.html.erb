<!-- marque

 Info carte grise
(si pas meme personne :)
    prénom sur la carte grise
    nom sur la carte grise
    depuis combien de temps a le permis
    ville
    CP
    date naissance
(sinon :)
    info de @person

ancien véhicule ?
    date achat
    marque

 -->

<%= form_for @order, html: { id: 'form' } do |order_form| %>
  <%= order_form.hidden_field :public_id %>

  <section id="person-information" class="form-section">
    <h3 class="form-title">Person information</h3>

    <%= order_form.fields_for :person do |person_fields| %>
      <div class="row">
        <div class="col-xs-12 col-md-4">
          <div class="form-group row">
            <%= person_fields.label :first_name, class: 'col-xs-3 form-control-label' %>

            <div class="col-xs-9">
              <%= person_fields.text_field :first_name, class: 'form-control', placeholder: 'First name', required: true,
                  'v-model': 'person.firstName', 'v-on:keyup': 'update' %>
              <small class="text-muted text-help">{{ error.updateContent }}</small>
            </div>
          </div>
        </div>

        <div class="col-xs-12 col-md-4">
          <div class="form-group row">
            <%= person_fields.label :last_name, class: 'col-xs-3 form-control-label' %>

            <div class="col-xs-9">
              <%= person_fields.text_field :last_name, class: 'form-control', placeholder: 'Last name',
                  'v-model': 'person.lastName', 'v-on:keyup': 'update' %>
              <small class="text-muted text-help">{{ error.updateContent }}</small>
            </div>
          </div>
        </div>

        <div class="col-xs-12 col-md-4">
          <div class="form-group row">
            <%= person_fields.label :birth_date, class: 'col-xs-3 form-control-label' %>

            <div class="col-xs-9">
              <%= person_fields.text_field :birth_date, class: 'form-control', placeholder: 'Birth date',
                  'v-model': 'person.birthDate', 'v-on:keyup': 'update' %>
              <small class="text-muted text-help">{{ error.updateContent }}</small>
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-xs-12 col-md-4">
          <div class="form-group row">
            <%= person_fields.label :phone, class: 'col-xs-3 form-control-label' %>

            <div class="col-xs-9">
              <%= person_fields.text_field :phone, class: 'form-control', placeholder: 'Phone', required: true,
                  'v-model': 'person.phone', 'v-on:keyup': 'update' %>
              <small class="text-muted text-help">{{ error.updateContent }}</small>
            </div>
          </div>
        </div>

        <div class="col-xs-12 col-md-4">
          <div class="form-group row">
            <%= person_fields.label :email, class: 'col-xs-3 form-control-label' %>

            <div class="col-xs-9">
              <%= person_fields.email_field :email, class: 'form-control', placeholder: 'Email', pattern: '^.+@.+$',
                  'v-model': 'person.email', 'v-on:keyup': 'update' %>
              <small class="text-muted text-help">{{ error.updateContent }}</small>
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-xs-12 col-md-4">
          <div class="form-group row">
            <%= person_fields.label :postal_code, class: 'col-xs-3 form-control-label' %>

            <div class="col-xs-9">
              <%= person_fields.text_field :postal_code, class: 'form-control', placeholder: 'Input 4',
                  'v-model': 'person.postalCode', 'v-on:keyup': 'update' %>
              <small class="text-muted text-help">{{ error.updateContent }}</small>
            </div>
          </div>
        </div>

        <div class="col-xs-12 col-md-4">
          <div class="form-group row">
            <%= person_fields.label :city, class: 'col-xs-3 form-control-label' %>

            <div class="col-xs-9">
              <%= person_fields.text_field :city, class: 'form-control', placeholder: 'Input 5',
                  'v-model': 'person.city', 'v-on:keyup': 'update' %>
              <small class="text-muted text-help">{{ error.updateContent }}</small>
            </div>
          </div>
        </div>

        <div class="col-xs-12 col-md-4">
          <div class="form-group row" v-show="person.city">
            <%= person_fields.label :thoroughfare, class: 'col-xs-3 form-control-label' %>

            <div class="col-xs-9">
              <%= person_fields.text_field :thoroughfare, class: 'form-control', placeholder: 'Input 6',
                  'v-model': 'person.thoroughfare', 'v-on:keyup': 'update' %>
              <small class="text-muted text-help">{{ error.updateContent }}</small>
            </div>
          </div>

          <div class="form-group row" v-else>
            <div class="col-xs-9 col-xs-offset-3 text-center">
              <small class="text-muted">Adresse non visible si ville non remplie</small>
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-xs-12 col-md-4">
          <div class="form-group row">
            <a class="bd-popover" tabindex="0" style="position: absolute; top: 0; left: 0;"
               data-toggle="popover" data-container="body" title="Texte approprié au champ"
               data-trigger="focus" data-placement="top" data-html="true"
               data-content="A block of help text that breaks onto a new <strong>line</strong> and may extend beyond one <strong>line</strong>.
               A second <strong>line</strong> of help text that breaks onto a new <strong>line</strong> and may extend beyond one <strong>line</strong>.">
              <i class="fa fa-info"></i>
            </a>

            <%= person_fields.label :gender, class: 'col-xs-3 form-control-label' %>

            <div class="col-xs-9">
              <div class="btn-group" data-toggle="buttons">
                <%= person_fields.collection_radio_buttons :gender, Person.genders.keys, :to_s, :to_s do |b| %>
                  <%#= bootstrap_collection_radio_buttons(person_fields.object.gender, b) %>
                <% end %>

                <!-- <label class="btn btn-secondary">
                  <input type="radio" name="options" id="option1" autocomplete="off"><i class="fa fa-mars"></i> Male
                </label>
                <label class="btn btn-secondary">
                  <input type="radio" name="options" id="option2" autocomplete="off"><i class="fa fa-venus"></i> Femal
                </label>
                <label class="btn btn-secondary active">
                  <input type="radio" name="options" id="option3" autocomplete="off" checked><i class="fa fa-question"></i> Unknow
                </label> -->
              </div>
            </div>
          </div>
        </div>
      </div>
    <% end %>
  </section>

  <%= order_form.fields_for :car do |car_fields| %>
    <section id="car-information" class="form-section">
      <h3 class="form-title">Car information</h3>

    </section>
  <% end %>

  <div class="form-group row">
    <div class="col-xs-12">
      <%= button_tag type: 'submit', class: 'btn btn-success pull-right' do %>
        <i class="fa fa-check"></i> Valider
      <% end %>
    </div>
  </div>
<% end %>
